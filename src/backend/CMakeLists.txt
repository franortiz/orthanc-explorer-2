cmake_minimum_required(VERSION 2.8)

project(OE2)
get_filename_component(DATA_DIR ${CMAKE_SOURCE_DIR} PATH)

SET(RESOURCES_ROOT ${DATA_DIR}/frontend/staticRessource)


set(AUTOGENERATED_DIR "${CMAKE_CURRENT_BINARY_DIR}/AUTOGENERATED")
  set(AUTOGENERATED_SOURCES "${AUTOGENERATED_DIR}/EmbeddedResources.cpp")

  file(MAKE_DIRECTORY ${AUTOGENERATED_DIR})
  include_directories(${AUTOGENERATED_DIR})

  set(TARGET_BASE "${AUTOGENERATED_DIR}/EmbeddedResources")
  add_custom_command(
    OUTPUT
    "${AUTOGENERATED_DIR}/EmbeddedResources.h"
    "${AUTOGENERATED_DIR}/EmbeddedResources.cpp"
    COMMAND 
    python
    "${CMAKE_CURRENT_SOURCE_DIR}/EmbedResources.py"
    "${AUTOGENERATED_DIR}/EmbeddedResources"
    STATIC_RESOURCES
    ${RESOURCES_ROOT}
    DEPENDS
    "${CMAKE_CURRENT_SOURCE_DIR}/EmbedResources.py"
    ${STATIC_RESOURCES}
    )




list(APPEND AUTOGENERATED_SOURCES
  "${CMAKE_CURRENT_SOURCE_DIR}/src/database.cpp"
  "${CMAKE_CURRENT_SOURCE_DIR}/src/CookieHandler.cpp"
  "${CMAKE_CURRENT_SOURCE_DIR}/src/external/jsoncpp.cpp"
  "${CMAKE_CURRENT_SOURCE_DIR}/src/external/sqlite3.c"
  "${CMAKE_CURRENT_SOURCE_DIR}/src/filter.cpp"
  "${CMAKE_CURRENT_SOURCE_DIR}/src/OEplugin.cpp"

  )
set (CMAKE_CXX_STANDARD 11)
add_library(OE2 SHARED 
  ${AUTOGENERATED_SOURCES})